# [Where's Waldo](https://wheres-waldo-gilt.vercel.app/)

Click above to see the live project.

Built as part of the [Where's Waldo Project from The Odin Project](https://www.theodinproject.com/lessons/nodejs-where-s-waldo-a-photo-tagging-app)

---

## Project Overview

The app has three main parts:

1. Backend on Railway for verifying selections, tracking score, and updating the database
2. Postgres database managed by Prisma ORM, also hosted on Railway
3. Where's Waldo style application for playing the game and checking the leaderboard, hosted on Vercel

---

## Tech Stack

- HTML, CSS, JavaScript
- React, ReactRouter, Vite, Tailwind
- PostgreSQL, Prisma
- Node.js, TypeScript, Express.js
- Railway, Vercel
- Postman

This game is for educational purposes and will not be maintained.

---

## Lessons Learned

- **Coordinate Adjustments**  
  I knew from the start that making the site responsive would make evaluating user click coordinates harder. I was able to get the click event to choose the coordinate on the picture element rather than the screen by offsetting to the image, which solved a lot of the issues.  
  The desktop picture made the mobile version far more difficult though, so I decided to use two versions of the image and two sets of correct coordinates depending on screen size. This made the difficulty more comparable across different devices.

- **User Getting Negative Score**  
  The leaderboard started filling up with a user showing a negative score. Since the score is based on time, this shouldn’t have been possible.  
  I checked the deployment logs and found a couple of vulnerabilities, one of which was being exploited. The main issue was that I forgot to verify whether the end time was valid and in the future. Also, the end time was being sent from the frontend rather than generated by the backend.  
  I made a few changes to the gameover function:

  1. Verifies the game exists
  2. Generates its own end time
  3. Ensures the end time is after the start time

  I tested the fix in Postman, and now it returns an error message instead of allowing a negative score.  
  That issue was fixed, but a couple of edge cases still remain (see next section).

---

## Things I'd Do Differently or Expand On

- **Patching the negative score vulnerability still left the app with a couple of issues**

  1. A user can still get the minimum possible score. Using Postman, I was able to play once, find the correct coordinates, then use a flow to create a new game and submit all three guesses almost instantly.  
     Some possible mitigations (outside the scope of this learning project) include:

     - Adding a random offset to the correct coordinates. Each game would have a different offset, which would make it harder to hardcode answers. The offset might still need to be sent to the frontend, so it wouldn’t fully prevent the issue but would make it tougher to exploit.
     - Using a rate limiter. This would prevent users from guessing too quickly. It could stop impossible scores, but might affect the real user experience if the time buffer is too long.

  2. The user's score now depends on their connection speed. Because the finish time is set by the backend, there’s a delay between the user finishing and the request completing. This gives an unfair disadvantage to users with slower connections, and the in-game timer might not match the final score.  
     For this project, it's an acceptable trade-off to prevent users from submitting fake finish times. But a better compromise might be to allow the user to submit their own time, and have the backend validate it’s within a reasonable delay window.

- **Possible Features**
  - New images / select your image
  - More characters
  - Daily challenges
  - Create your own game
  - User accounts and stats

---
